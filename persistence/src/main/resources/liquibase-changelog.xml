<!--
    Copyright (c) 2015 Development Gateway, Inc and others.

    All rights reserved. This program and the accompanying materials
    are made available under the terms of the MIT License (MIT)
    which accompanies this distribution, and is available at
    https://opensource.org/licenses/MIT

    Contributors:
    Development Gateway - initial API and implementation
-->
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    
    <changeSet id="AD3-26" author="Octavian Ciubotaru">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="person" />
            <columnExists tableName="person" columnName="organization_id" />
            <tableExists tableName="role" />
            <tableExists tableName="person_roles" />
            <tableExists tableName="category" />
        </preConditions>
        <insert tableName="category">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="dtype" value="Organization" />
            <column name="label" value="FAO" />
        </insert>
        <insert tableName="person">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="username" value="admin" />
            <column name="email" value="admin@developmentgateway.org" />
            <column name="enabled" value="true" />
            <column name="password" value="$2a$10$BTYSCSAFdv8K31CsY8RnN.FsJHp8xcUcMxWvf2L7QR3.C2hP02cQe" />
        </insert>
        <insert tableName="person">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="username" value="fao" />
            <column name="email" value="fao@developmentgateway.org" />
            <column name="enabled" value="true" />
            <column name="password" value="$2a$10$BTYSCSAFdv8K31CsY8RnN.FsJHp8xcUcMxWvf2L7QR3.C2hP02cQe" />
        </insert>
        <insert tableName="role">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="authority" value="ROLE_ADMIN" />
        </insert>
        <insert tableName="role">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="authority" value="ROLE_FOCAL_POINT" />
        </insert>
        <sql><![CDATA[
            INSERT INTO person_roles(person_id, roles_id)
            SELECT p.id, r.id
            FROM person p,
                 role r
            WHERE p.username = 'admin'
              AND r.authority = 'ROLE_ADMIN';
        ]]></sql>
        <sql><![CDATA[
            INSERT INTO person_roles(person_id, roles_id)
            SELECT p.id, r.id
            FROM person p,
                 role r
            WHERE p.username = 'fao'
              AND r.authority = 'ROLE_FOCAL_POINT';
        ]]></sql>
        <sql><![CDATA[
            UPDATE person
            SET organization_id=org.id
            FROM category org
            WHERE person.username = 'fao'
              AND org.dtype = 'Organization'
              AND org.label = 'FAO';
        ]]></sql>
    </changeSet>

    <changeSet id="regionInsert" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region" />
            <tableExists tableName="department" />
            <tableExists tableName="market" />
        </preConditions>
        <sql><![CDATA[
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Dakar', 'DK');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Diourbel', 'DL');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Fatick', 'FK');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Kaolack', 'KL');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Kolda', 'KD');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Louga', 'LG');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Matam', 'MT');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Saint-Louis', 'SL');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Tambacounda', 'TC');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Thiès', 'TH');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Ziguinchor', 'ZG');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Kaffrine', 'KF');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Kédougou', 'KG');
            insert into region(id, name, code) values (nextval('hibernate_sequence'), 'Sédhiou', 'SD');

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Dakar' from region where name='Dakar';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Guédiawaye' from region where name='Dakar';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Pikine' from region where name='Dakar';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Rufisque' from region where name='Dakar';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Bambey' from region where name='Diourbel';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Diourbel' from region where name='Diourbel';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Mbacké' from region where name='Diourbel';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Fatick' from region where name='Fatick';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Foundiougne' from region where name='Fatick';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Gossas' from region where name='Fatick';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kaolack' from region where name='Kaolack';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Guinguinéo' from region where name='Kaolack';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Nioro du Rip' from region where name='Kaolack';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kolda' from region where name='Kolda';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Vélingara' from region where name='Kolda';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Médina Yoro Foulah' from region where name='Kolda';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kébémer' from region where name='Louga';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Linguère' from region where name='Louga';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Louga' from region where name='Louga';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kanel' from region where name='Matam';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Matam' from region where name='Matam';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Ranérou' from region where name='Matam';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Dagana' from region where name='Saint-Louis';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Podor' from region where name='Saint-Louis';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Saint-Louis' from region where name='Saint-Louis';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Bakel' from region where name='Tambacounda';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Koumpentoum' from region where name='Tambacounda';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Tambacounda' from region where name='Tambacounda';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Goudiry' from region where name='Tambacounda';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'M''bour' from region where name='Thiès';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Thiès' from region where name='Thiès';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Tivaouane' from region where name='Thiès';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Bignona' from region where name='Ziguinchor';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Oussouye' from region where name='Ziguinchor';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Ziguinchor' from region where name='Ziguinchor';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Birkilane' from region where name='Kaffrine';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kaffrine' from region where name='Kaffrine';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Malem-Hodar' from region where name='Kaffrine';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kounghel' from region where name='Kaffrine';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Kédougou' from region where name='Kédougou';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Salemata' from region where name='Kédougou';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Saraya' from region where name='Kédougou';

            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Bounkiling' from region where name='Sédhiou';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Goudomp' from region where name='Sédhiou';
            insert into department(id, region_id, name) select nextval('hibernate_sequence'),id,'Sédhiou' from region where name='Sédhiou';

            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Bignona' from department where name='Bignona';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Birkilane' from department where name='Birkilane';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Touba Mouride' from department where name='Bounkiling';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Tilene' from department where name='Dakar';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Diourbel' from department where name='Diourbel';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Fatick' from department where name='Fatick';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Passy' from department where name='Foundiougne';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Kaffrine' from department where name='Kaffrine';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Thiodaye' from department where name='Kanel';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Kaolack' from department where name='Kaolack';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Kolda' from department where name='Kolda';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Mereto' from department where name='Koumpentoum';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Kédougou' from department where name='Kédougou';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Mako' from department where name='Kédougou';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Gouille Mbeuth' from department where name='Louga';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Louga' from department where name='Louga';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Ourossogui' from department where name='Matam';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Thiodaye' from department where name='Matam';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Touba' from department where name='Mbacké';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Porokhane' from department where name='Nioro du Rip';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Thiaroye' from department where name='Pikine';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Mpal' from department where name='Saint-Louis';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Saint-Louis' from department where name='Saint-Louis';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Sédhiou' from department where name='Sédhiou';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Tambacounda' from department where name='Tambacounda';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Thiès' from department where name='Thiès';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Touba Toul' from department where name='Thiès';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Diaobe' from department where name='Vélingara';
            insert into market(id, department_id, name) select nextval('hibernate_sequence'),id,'Saint-Maur' from department where name='Ziguinchor';
        ]]></sql>
    </changeSet>

    <changeSet id="AD3-53: crop types" author="Octavian Ciubotaru">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Corn');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Imported Corn');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Millet');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Rice');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Imported Rice');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Imported Scented Rice');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Sorghum');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Imported Sorghum');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Maïs','fr',id FROM category WHERE label='Corn' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Maïs Importé','fr',id FROM category WHERE label='Imported Corn' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Millet','fr',id FROM category WHERE label='Millet' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Riz','fr',id FROM category WHERE label='Rice' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Riz Importé','fr',id FROM category WHERE label='Imported Rice' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Riz Importé Parfumé','fr',id FROM category WHERE label='Imported Scented Rice' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Sorgho','fr',id FROM category WHERE label='Sorghum' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Sorgho Importé','fr',id FROM category WHERE label='Imported Sorghum' AND dtype='CropType';
        ]]></sql>
    </changeSet>

    <changeSet id="Gender and Age Groups" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Peanut');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Irrigated Rice');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Rainfed Rice');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Mock Tomato');
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Arachide','fr',id FROM category WHERE label='Peanut' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Riz Irrigué','fr',id FROM category WHERE label='Irrigated Rice' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Riz pluvial','fr',id FROM category WHERE label='Rainfed Rice' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Diakhatou','fr',id FROM category WHERE label='Mock Tomato' AND dtype='CropType';


            INSERT INTO category (dtype, id, label) VALUES ('AgriculturalWomenGroup', nextval('hibernate_sequence'), 'Age Group');
            INSERT INTO category (dtype, id, label) VALUES ('AgriculturalWomenGroup', nextval('hibernate_sequence'), 'Method of enforcement');
            INSERT INTO category (dtype, id, label) VALUES ('AgriculturalWomenGroup', nextval('hibernate_sequence'), 'Distribution areas/parcels');
            INSERT INTO category (dtype, id, label) VALUES ('AgriculturalWomenGroup', nextval('hibernate_sequence'), 'Distribution zones/utilized zones');

            INSERT INTO category (dtype, id, label) VALUES ('Gender', nextval('hibernate_sequence'), 'Male');
            INSERT INTO category (dtype, id, label) VALUES ('Gender', nextval('hibernate_sequence'), 'Female');
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Masculin','fr',id FROM category WHERE label='Male' AND dtype='Gender';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Féminin','fr',id FROM category WHERE label='Female' AND dtype='Gender';

            INSERT INTO category (dtype, id, label) VALUES ('AgeGroup', nextval('hibernate_sequence'), 'Under 15');
            INSERT INTO category (dtype, id, label) VALUES ('AgeGroup', nextval('hibernate_sequence'), '15-25');
            INSERT INTO category (dtype, id, label) VALUES ('AgeGroup', nextval('hibernate_sequence'), '25-45');
            INSERT INTO category (dtype, id, label) VALUES ('AgeGroup', nextval('hibernate_sequence'), '45-65');
            INSERT INTO category (dtype, id, label) VALUES ('AgeGroup', nextval('hibernate_sequence'), 'Over 66');
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Moins de 15','fr',id FROM category WHERE label='Under 15' AND dtype='AgeGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Plus de 66','fr',id FROM category WHERE label='Over 66' AND dtype='AgeGroup';

            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Ownership');
            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Undocumented ownership');
            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Rent with agreement');
            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Rent without agreement');
            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Loan');
            INSERT INTO category (dtype, id, label) VALUES ('MethodOfEnforcement', nextval('hibernate_sequence'), 'Free Occupation or Occupation without authorization');

        ]]></sql>
    </changeSet>

    <changeSet id="Food type loss" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Lost in storage');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Used in seed lots');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Sold');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Personal consumption');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Transformation');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'Donation & Zakat');
            INSERT INTO category (dtype, id, label) VALUES ('LossType', nextval('hibernate_sequence'), 'For animals consumption');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Perdu dans le stockage','fr',id FROM category WHERE label='Lost in storage' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Utilisé dans les lots de semences','fr',id FROM category WHERE label='Used in seed lots' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Vendu','fr',id FROM category WHERE label='Sold' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Consommation personnelle','fr',id FROM category WHERE label='Personal consumption' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Transformation','fr',id FROM category WHERE label='Transformation' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Don et Zakat','fr',id FROM category WHERE label='Donation & Zakat' AND dtype='LossType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Pour la consommation animale','fr',id FROM category WHERE label='For animals consumption' AND dtype='LossType';
        ]]></sql>
    </changeSet>

    <changeSet id="AD3-56: crop types" author="Octavian Ciubotaru">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Fonio');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Peanut Oil');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Cotton');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Cowpea');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Cassava');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Watermelon');
            INSERT INTO category (dtype, id, label) VALUES ('CropType', nextval('hibernate_sequence'), 'Sesame');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Fonio','fr',id FROM category WHERE label='Fonio' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Arachide Huilerie','fr',id FROM category WHERE label='Peanut Oil' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Coton','fr',id FROM category WHERE label='Cotton' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Niébé','fr',id FROM category WHERE label='Cowpea' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Manioc','fr',id FROM category WHERE label='Cassava' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Pastèque','fr',id FROM category WHERE label='Watermelon' AND dtype='CropType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Sésame','fr',id FROM category WHERE label='Sesame' AND dtype='CropType';
        ]]></sql>
    </changeSet>

    <changeSet id="Crop subtypes" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('CropSubType', nextval('hibernate_sequence'), 'Both');
            INSERT INTO category (dtype, id, label) VALUES ('CropSubType', nextval('hibernate_sequence'), 'Scented');
            INSERT INTO category (dtype, id, label) VALUES ('CropSubType', nextval('hibernate_sequence'), 'Unscented (ordinary)');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Parfumé','fr',id FROM category WHERE label='Scented' AND dtype='CropSubType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Non parfumé (ordinaire)','fr',id FROM category WHERE label='Unscented (ordinary)' AND dtype='CropSubType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Les deux','fr',id FROM category WHERE label='Both' AND dtype='CropSubType';
        ]]></sql>
    </changeSet>

    <changeSet id="Poverty - loc type and prof activity" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('LocationType', nextval('hibernate_sequence'), 'Urban');
            INSERT INTO category (dtype, id, label) VALUES ('LocationType', nextval('hibernate_sequence'), 'Suburban');
            INSERT INTO category (dtype, id, label) VALUES ('LocationType', nextval('hibernate_sequence'), 'Rural');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Urbain','fr',id FROM category WHERE label='Urban' AND dtype='LocationType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Suburbain','fr',id FROM category WHERE label='Suburban' AND dtype='LocationType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Rural','fr',id FROM category WHERE label='Rural' AND dtype='LocationType';

            INSERT INTO category (dtype, id, label) VALUES ('ProfessionalActivity', nextval('hibernate_sequence'), 'Arts and crafts');
            INSERT INTO category (dtype, id, label) VALUES ('ProfessionalActivity', nextval('hibernate_sequence'), 'Commercial/sales');
            INSERT INTO category (dtype, id, label) VALUES ('ProfessionalActivity', nextval('hibernate_sequence'), 'Inactive/unemployed');
            INSERT INTO category (dtype, id, label) VALUES ('ProfessionalActivity', nextval('hibernate_sequence'), 'Retirees');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Artisanat','fr',id FROM category WHERE label='Arts and crafts' AND dtype='ProfessionalActivity';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Commerce/vente','fr',id FROM category WHERE label='Commercial/sales' AND dtype='ProfessionalActivity';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Inactifs/chômeurs','fr',id FROM category WHERE label='Inactive/unemployed' AND dtype='ProfessionalActivity';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Retraités','fr',id FROM category WHERE label='Retirees' AND dtype='ProfessionalActivity';

        ]]></sql>
    </changeSet>

    <changeSet id="RapidLinkPosition" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('RapidLinkPosition', nextval('hibernate_sequence'), 'First');
            INSERT INTO category (dtype, id, label) VALUES ('RapidLinkPosition', nextval('hibernate_sequence'), 'Second');
            INSERT INTO category (dtype, id, label) VALUES ('RapidLinkPosition', nextval('hibernate_sequence'), 'Third');
            INSERT INTO category (dtype, id, label) VALUES ('RapidLinkPosition', nextval('hibernate_sequence'), 'Fourth');
            INSERT INTO category (dtype, id, label) VALUES ('RapidLinkPosition', nextval('hibernate_sequence'), 'Fifth');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Première','fr',id FROM category WHERE label='First' AND dtype='RapidLinkPosition';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Second','fr',id FROM category WHERE label='Second' AND dtype='RapidLinkPosition';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Troisième','fr',id FROM category WHERE label='Third' AND dtype='RapidLinkPosition';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Quatrième','fr',id FROM category WHERE label='Fourth' AND dtype='RapidLinkPosition';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Cinquième','fr',id FROM category WHERE label='Fifth' AND dtype='RapidLinkPosition';

        ]]></sql>
    </changeSet>

    <changeSet id="RapidLinkPosition2" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            UPDATE category SET description='1' WHERE dtype = 'RapidLinkPosition' AND label = 'First';
            UPDATE category SET description='2' WHERE dtype = 'RapidLinkPosition' AND label = 'Second';
            UPDATE category SET description='3' WHERE dtype = 'RapidLinkPosition' AND label = 'Third';
            UPDATE category SET description='4' WHERE dtype = 'RapidLinkPosition' AND label = 'Fourth';
            UPDATE category SET description='5' WHERE dtype = 'RapidLinkPosition' AND label = 'Fifth';
        ]]></sql>
    </changeSet>

    <changeSet id="RapidLinkPosition3" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            UPDATE localized_category_label SET label='Deuxième' WHERE label = 'Second';
        ]]></sql>
    </changeSet>

    <changeSet id="AlterDatasetTableDtypeColumn" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="dataset" />
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE dataset ALTER COLUMN dtype TYPE varchar(255);
        ]]></sql>
    </changeSet>



    <changeSet id="IndexTypesEN" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Budget public total');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Specific Agriculture Expenditures');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Expenditure on agriculture');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Administrative costs');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Government Expenditures in Support of Agriculture and Food (DPAA)');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Administrative costs in DPAA');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Specific expenditure in total public budget (DPAA meaning restricted)');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Expenditure in favor in total public budget');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'DPAA (broad sense) in total public budget');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Variable inputs (seeds, fertilizers, other)');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Other payments to producers');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Capital (equipment, on-farm irrigation, livestock, other basic on-farm infrastructure)');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'On-farm services (control (e.g. pests, veterinary services, technical assistance, extension, etc.)');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Income Support');
            INSERT INTO category (dtype, id, label) VALUES ('IndexType', nextval('hibernate_sequence'), 'Input subsidy ratio / GDP');

        ]]></sql>
    </changeSet>

    <changeSet id="FrenchLabels" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Budget public total','fr',id FROM category WHERE label='Budget public total' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Dépenses spécifiques à l''agriculture','fr',id FROM category WHERE label='Specific Agriculture Expenditures' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Dépenses en faveur de l''agriculture','fr',id FROM category WHERE label='Expenditure on agriculture' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Coût Administratif','fr',id FROM category WHERE label='Administrative costs' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Dépenses publiques d''appui à l''agriculture et à l''alimentation (DPAA)','fr',id FROM category WHERE label='Government Expenditures in Support of Agriculture and Food (DPAA)' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Coûts administratifs des DPAA','fr',id FROM category WHERE label='Administrative costs in DPAA' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Dépenses spécifiques dans budget public total (DPAA sens restreint)','fr',id FROM category WHERE label='Specific expenditure in total public budget (DPAA meaning restricted)' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Dépenes en faveur dans budget public total','fr',id FROM category WHERE label='Expenditure in favor in total public budget' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'DPAA (sens large) dans budget public total','fr',id FROM category WHERE label='DPAA (broad sense) in total public budget' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Intrants variables (semences, engrais, autres)','fr',id FROM category WHERE label='Variable inputs (seeds, fertilizers, other)' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Autres paiements aux producteurs','fr',id FROM category WHERE label='Other payments to producers' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Immobilisations (équipement, irrigation à la ferme, bétail, autres infrastructures de base à la ferme)','fr',id FROM category WHERE label='Capital (equipment, on-farm irrigation, livestock, other basic on-farm infrastructure)' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Services à la ferme (lutte contre les ravageurs, services vétérinaires, assistance technique, vulgarisation, etc.','fr',id FROM category WHERE label='On-farm services (control (e.g. pests, veterinary services, technical assistance, extension, etc.)' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Soutien au revenu','fr',id FROM category WHERE label='Income Support' AND dtype='IndexType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Taux de subvention des intrants / PIB','fr',id FROM category WHERE label='Input subsidy ratio / GDP' AND dtype='IndexType';

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Groupe d''âge','fr',id FROM category WHERE label='Age Group' AND dtype='AgriculturalWomenGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Mode d''exécution','fr',id FROM category WHERE label='Method of enforcement' AND dtype='AgriculturalWomenGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Zones de distribution/parcelles','fr',id FROM category WHERE label='Distribution areas/parcels' AND dtype='AgriculturalWomenGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Zones de distribution/zones utilisées','fr',id FROM category WHERE label='Distribution zones/utilized zones' AND dtype='AgriculturalWomenGroup';

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Propriété','fr',id FROM category WHERE label='Ownership' AND dtype='MethodOfEnforcement';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Propriété non documentée','fr',id FROM category WHERE label='Undocumented ownership' AND dtype='MethodOfEnforcement';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Loyer avec convention','fr',id FROM category WHERE label='Rent with agreement' AND dtype='MethodOfEnforcement';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Loyer sans convention','fr',id FROM category WHERE label='Rent without agreement' AND dtype='MethodOfEnforcement';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Prêt','fr',id FROM category WHERE label='Loan' AND dtype='MethodOfEnforcement';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Occupation libre ou occupation sans autorisation','fr',id FROM category WHERE label='Free Occupation or Occupation without authorization' AND dtype='MethodOfEnforcement';
        ]]></sql>
    </changeSet>

    <changeSet id="PovertyLevels" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('PovertyLevel', nextval('hibernate_sequence'), 'Not poor');
            INSERT INTO category (dtype, id, label) VALUES ('PovertyLevel', nextval('hibernate_sequence'), 'Poor');
            INSERT INTO category (dtype, id, label) VALUES ('PovertyLevel', nextval('hibernate_sequence'), 'Very poor');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Non pauvre','fr',id FROM category WHERE label='Not poor' AND dtype='PovertyLevel';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Pauvre','fr',id FROM category WHERE label='Poor' AND dtype='PovertyLevel';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Très pauvre','fr',id FROM category WHERE label='Very poor' AND dtype='PovertyLevel';

        ]]></sql>
    </changeSet>

    <changeSet id="CategoryTypeIds" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE category add column type int8;

            UPDATE category SET type='1' WHERE dtype = 'AgriculturalWomenGroup' AND label = 'Age Group';
            UPDATE category SET type='2' WHERE dtype = 'AgriculturalWomenGroup' AND label = 'Method of enforcement';
            UPDATE category SET type='3' WHERE dtype = 'AgriculturalWomenGroup' AND label = 'Distribution areas/parcels';
            UPDATE category SET type='4' WHERE dtype = 'AgriculturalWomenGroup' AND label = 'Distribution zones/utilized zones';

            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Budget public total';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Specific Agriculture Expenditures';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Expenditure on agriculture';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Administrative costs';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Government Expenditures in Support of Agriculture and Food (DPAA)';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Administrative costs in DPAA';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Specific expenditure in total public budget (DPAA meaning restricted)';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'Expenditure in favor in total public budget';
            UPDATE category SET type='1' WHERE dtype = 'IndexType' AND label = 'DPAA (broad sense) in total public budget';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'Variable inputs (seeds, fertilizers, other)';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'Other payments to producers';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'Capital (equipment, on-farm irrigation, livestock, other basic on-farm infrastructure)';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'On-farm services (control (e.g. pests, veterinary services, technical assistance, extension, etc.)';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'Income Support';
            UPDATE category SET type='2' WHERE dtype = 'IndexType' AND label = 'Input subsidy ratio / GDP';

        ]]></sql>
    </changeSet>

    <changeSet id="CategoryTypeIdsUpdate" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[

            UPDATE category SET type='3' WHERE dtype = 'IndexType' AND label = 'Administrative costs in DPAA';
            UPDATE category SET type='3' WHERE dtype = 'IndexType' AND label = 'Specific expenditure in total public budget (DPAA meaning restricted)';
            UPDATE category SET type='3' WHERE dtype = 'IndexType' AND label = 'Expenditure in favor in total public budget';
            UPDATE category SET type='3' WHERE dtype = 'IndexType' AND label = 'DPAA (broad sense) in total public budget';

        ]]></sql>
    </changeSet>

    <changeSet id="Indicators" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('Indicator', nextval('hibernate_sequence'), 'Proportion of population below the international poverty line');
            INSERT INTO category (dtype, id, label) VALUES ('Indicator', nextval('hibernate_sequence'), 'Women in the agricultural sector');
            INSERT INTO category (dtype, id, label) VALUES ('Indicator', nextval('hibernate_sequence'), 'Global food loss index');
            INSERT INTO category (dtype, id, label) VALUES ('Indicator', nextval('hibernate_sequence'), 'Agriculture orientation index for government expenditures');

        ]]></sql>
    </changeSet>

    <changeSet id="IndicatorsType" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            UPDATE category SET type='1' WHERE dtype = 'Indicator' AND label = 'Proportion of population below the international poverty line';
            UPDATE category SET type='2' WHERE dtype = 'Indicator' AND label = 'Women in the agricultural sector';
            UPDATE category SET type='3' WHERE dtype = 'Indicator' AND label = 'Global food loss index';
            UPDATE category SET type='4' WHERE dtype = 'Indicator' AND label = 'Agriculture orientation index for government expenditures';

        ]]></sql>
    </changeSet>

    <changeSet id="IndicatorsUpdate" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            UPDATE category SET label = 'Proportion de la population en-deça du seuil international de pauvreté' WHERE dtype = 'Indicator' AND label = 'Proportion of population below the international poverty line';
            UPDATE category SET label = 'Les femmes dans le secteur agricole' WHERE dtype = 'Indicator' AND label = 'Women in the agricultural sector';
            UPDATE category SET label = 'Répartition moyenne de la production' WHERE dtype = 'Indicator' AND label = 'Global food loss index';
            UPDATE category SET label = 'Indice de l''orientation des dépenses du gouvernement en faveur de l''agriculture' WHERE dtype = 'Indicator' AND label = 'Agriculture orientation index for government expenditures';

        ]]></sql>
    </changeSet>

    <changeSet id="Population" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="region_stat" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label) VALUES ('Statistic', nextval('hibernate_sequence'), 'Population');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Dakar'), 2013, '3137196');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Diourbel'), 2013, '1497455');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Fatick'), 2013, '835352');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Kaolack'), 2013, '960875');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Kolda'), 2013, '714392');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Louga'), 2013, '874193');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Matam'), 2013, '562539');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Saint-Louis'), 2013, '908942');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Tambacounda'), 2013, '681310');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Thiès'), 2013, '1788864');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Ziguinchor'), 2013, '549151');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Kaffrine'), 2013, '566992');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Kédougou'), 2013, '152357');
            INSERT INTO region_stat (id, statistic_id, region_id, year, value) VALUES (nextval('hibernate_sequence'), (select id from category where label = 'Population'), (select id from region where name = 'Sédhiou'), 2013, '452944');

        ]]></sql>
    </changeSet>

    <changeSet id="PartnerGroup" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Government Agencies', 1);
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Civil Society Organizations', 2);
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Development Partners', 3);
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Research Institutes', 4);
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Private Sector', 5);
            INSERT INTO category (dtype, id, label, type) VALUES ('PartnerGroup', nextval('hibernate_sequence'), 'Other', 6);
        ]]></sql>
    </changeSet>

    <changeSet id="DatasetType" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Market dataset', 'MarketDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Consumption dataset', 'ConsumptionDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Production dataset', 'ProductionDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Proportion of population below the international poverty line dataset', 'PovertyDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Average distribution of production dataset', 'FoodLossDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Women in the Agricultural sector dataset', 'AgriculturalWomenDataset');
            INSERT INTO category (dtype, id, label, description) VALUES ('DatasetType', nextval('hibernate_sequence'), 'Agriculture Orientation Index for Government Expenditures dataset', 'AgricultureOrientationIndexDataset');

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Production base de données','fr', id FROM category WHERE description='ProductionDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Marché base de données','fr', id FROM category WHERE description='MarketDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Consommation base de données','fr', id FROM category WHERE description='ConsumptionDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Proportion de la population en-deça du seuil international de pauvreté base de données','fr', id FROM category WHERE description='PovertyDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Répartition moyenne de la production base de données','fr', id FROM category WHERE description='FoodLossDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Les femmes dans le secteur agricole base de données','fr', id FROM category WHERE description='AgriculturalWomenDataset' AND dtype='DatasetType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Indice de l''orientation des dépenses du gouvernement en faveur de l''agriculture base de données','fr', id FROM category WHERE description='AgricultureOrientationIndexDataset' AND dtype='DatasetType';

        ]]></sql>
    </changeSet>

    <changeSet id="ContentTypeAndLocalizedLabels" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label, type) VALUES ('ContentType', nextval('hibernate_sequence'), 'Regulatory and legislative framework', 1);
            INSERT INTO category (dtype, id, label, type) VALUES ('ContentType', nextval('hibernate_sequence'), 'Projects and programs', 2);
            INSERT INTO category (dtype, id, label, type) VALUES ('ContentType', nextval('hibernate_sequence'), 'Studies and research', 3);
            INSERT INTO category (dtype, id, label, type) VALUES ('ContentType', nextval('hibernate_sequence'), 'Agricultural sector budget', 4);
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Cadre réglementaire et législatif','fr', id FROM category WHERE label='Regulatory and legislative framework' AND dtype='ContentType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Projets et programmes','fr', id FROM category WHERE label='Projects and programs' AND dtype='ContentType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Études et recherches','fr', id FROM category WHERE label='Studies and research' AND dtype='ContentType';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Budget du secteur agricole','fr', id FROM category WHERE label='Agricultural sector budget' AND dtype='ContentType';

            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Organismes gouvernementaux','fr', id FROM category WHERE label='Government Agencies' AND dtype='PartnerGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Organisations de la société civile','fr', id FROM category WHERE label='Civil Society Organizations' AND dtype='PartnerGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Partenaires au développement','fr', id FROM category WHERE label='Development Partners' AND dtype='PartnerGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Instituts de recherche','fr', id FROM category WHERE label='Research Institutes' AND dtype='PartnerGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'Secteur privé','fr', id FROM category WHERE label='Private Sector' AND dtype='PartnerGroup';
            INSERT INTO localized_category_label(id, label, language, category_id) SELECT nextval('hibernate_sequence'),'','fr', id FROM category WHERE label='Other' AND dtype='PartnerGroup';

        ]]></sql>
    </changeSet>

    <changeSet id="ContentTypeAndLocalizedLabelsUpdate" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            UPDATE localized_category_label SET label='Structures gouvernementales' WHERE label = 'Organismes gouvernementaux';
            UPDATE localized_category_label SET label='Autres' WHERE label = '';

        ]]></sql>
    </changeSet>

    <changeSet id="ChangeMilletCropTranslation" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            UPDATE localized_category_label SET label='Mil' WHERE label = 'Millet';

        ]]></sql>
    </changeSet>

    <changeSet id="RegionIndicatorFlags" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE region_indicator
                ADD COLUMN "left_map" BOOLEAN DEFAULT FALSE;
            ALTER TABLE region_indicator
                ADD COLUMN "right_map" BOOLEAN DEFAULT FALSE;

        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicatorColumnsNotNull" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <columnExists tableName="national_indicator" columnName="approved" />
            <columnExists tableName="national_indicator" columnName="descending" />
        </preConditions>
        <sql><![CDATA[

            alter table national_indicator alter COLUMN descending drop not null;

            alter table national_indicator alter COLUMN approved drop not null;

        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicators1" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <tableExists tableName="national_indicator_year_value" />
        </preConditions>
        <sql><![CDATA[
            insert into national_indicator (created_by, last_modified_by, description, description_fr, measure, name, name_fr, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'By 2030, ensure that all men and women, especially the poor and vulnerable, have equal rights to economic resources and have access to basic services, to land ownership , control of land and other forms of property, inheritance, natural resources and new technologies and financial services tailored to their needs, including microfinance', 'D’ici à 2030, faire en sorte que tous les hommes et les femmes, en particulier les  pauvres et les personnes vulnérables, aient les mêmes droits aux ressources économiques et qu’ils aient accès aux services de base, à la propriété foncière, au contrôle des terres et à d’autres formes de propriété, à l’héritage, aux ressources naturelles et à des nouvelles technologies et des services financiers adaptés à leurs besoins, y compris la microfinance', '%', 'Average access index to the 5 main basic social services', 'Indice d''accès moyen aux 5 principaux services sociaux de base', null, null, 'ANSD', null, 1000);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1000, 50.08, 2015, 1000, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1000, 50.78, 2016, 1001, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1000, 51.47, 2017, 1002, 3);


            insert into national_indicator (created_by, last_modified_by, description, description_fr, measure, name, name_fr, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'By 2030, eliminate hunger and ensure that everyone, especially the poor and vulnerable, including infants, has access to healthy, nutritious and sufficient food all year round', 'D’ici à 2030, éliminer la faim et faire en sorte que chacun, en particulier les pauvres et les personnes en situation vulnérable, y compris les nourrissons, ait accès toute l’année à une  alimentation saine, nutritive et suffisante', '%', 'Prevalence of undernourishment', 'Prévalence de la sous-alimentation', 29.4, 2001, 'ANSD/DGPPE', 3, 1001);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1001, 10.6, 2015, 1004, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1001, 10, 2016, 1005, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1001, 10.6, 2017, 1006, 3);


            insert into national_indicator (created_by, last_modified_by, description, description_fr, measure, name, name_fr, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Prevalence of stunting (height/age index less than -2 standard deviations from the median of child growth norms defined by the WHO) in children under 5 years of age', 'Prévalence du retard de croissance (indice taille/âge inférieur à -2 écarts types par rapport à la médiane des normes de croissance de l’enfant définies par l’OMS) chez les enfants de moins de 5 ans', '%', 'Prevalence of stunting in children 0-59 months', 'Prévalence du retard de croissance chez les enfants de 0-59 mois ', null, null, 'DPRS/CLM ', 0.05, 1002);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1002, 0.15, 2015, 1007, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1002, 0.17, 2016, 1008, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1002, 0.165, 2017, 1009, 3);

        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicators2" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <tableExists tableName="national_indicator_year_value" />
        </preConditions>
        <sql><![CDATA[
            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Prevalence of malnutrition in children under 5', 'Prévalence de la malnutrition chez les enfants de moins de 5 ans', 'By 2030, end all forms of malnutrition, including by 2025 meeting internationally agreed targets for stunting and wasting in children under 5 , and meet the nutritional needs of adolescent girls, pregnant and lactating women and the elderly', 'D’ici à 2030, mettre fin à toutes les formes de malnutrition, y compris en atteignant d’ici à 2025 les objectifs arrêtés à l’échelle internationale relatifs aux retards de croissance et à l’émaciation chez les enfants de moins de 5 ans, et répondre aux besoins nutritionnels des adolescentes, des femmes enceintes ou  allaitantes et des personnes âgées ', '%', 0.09, 2010, 'DPRS/CLM/ANSD', 0.03, 1003);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1003, 0.155, 2015, 1010, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1003, 0.135, 2016, 1011, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1003, 0.144, 2017, 1012, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Average rice yield (agricultural)', 'Rendement moyen riz (agricole)', 'By 2030, double the agricultural productivity and incomes of small food producers, especially women, indigenous people, family farmers, pastoralists and fishermen, including by ensuring equal access to land, other productive resources and factors of production, knowledge, financial services, markets and opportunities for adding value and non-agricultural jobs', 'D’ici à 2030, doubler la productivité agricole et les revenus des petits roducteurs alimentaires, en particulier des femmes, des autochtones, des exploitants familiaux, des éleveurs et des pêcheurs, y compris en assurant l’égalité d’accès aux terres, aux autres  essources productives et facteurs de production, au savoir, aux services financiers, aux marchés et aux possibilités d’ajout  de valeur et d''emplois autres qu''agricoles', 'kg/ha', 3717, 2011, 'DAPSA', null, 1004);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1004, 3819.4, 2015, 1013, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1004, 3331, 2016, 1014, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1004, 3306, 2017, 1015, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Average rice yield (pastoral)', 'Rendement moyen riz (pastorale)', 'By 2030, double the agricultural productivity and incomes of small food producers, especially women, indigenous people, family farmers, pastoralists and fishermen, including by ensuring equal access to land, other productive resources and factors of production, knowledge, financial services, markets and opportunities for adding value and non-agricultural jobs', 'D’ici à 2030, doubler la productivité agricole et les revenus des petits roducteurs alimentaires, en particulier des femmes, des autochtones, des exploitants familiaux, des éleveurs et des pêcheurs, y compris en assurant l’égalité d’accès aux terres, aux autres  essources productives et facteurs de production, au savoir, aux services financiers, aux marchés et aux possibilités d’ajout  de valeur et d''emplois autres qu''agricoles', 'kg/ha', 465, 2011, 'DAPSA', null, 1005);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1005, 813, 2015, 1016, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1005, 696, 2016, 1017, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1005, 913, 2017, 1018, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Average rice yield (forest)', 'Rendement moyen riz (forestière)', 'By 2030, double the agricultural productivity and incomes of small food producers, especially women, indigenous people, family farmers, pastoralists and fishermen, including by ensuring equal access to land, other productive resources and factors of production, knowledge, financial services, markets and opportunities for adding value and non-agricultural jobs', 'D’ici à 2030, doubler la productivité agricole et les revenus des petits roducteurs alimentaires, en particulier des femmes, des autochtones, des exploitants familiaux, des éleveurs et des pêcheurs, y compris en assurant l’égalité d’accès aux terres, aux autres  essources productives et facteurs de production, au savoir, aux services financiers, aux marchés et aux possibilités d’ajout  de valeur et d''emplois autres qu''agricoles', 'kg/ha', 609, 2011, 'DAPSA', null, 1006);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1006, 813, 2015, 1019, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1006, 696, 2016, 1020, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1006, 913, 2017, 1021, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Number of plant genetic resources for food and agriculture secured in medium or long-term conservation facilities', 'Nombre de ressources génétiques végétales destinées à l’alimentation et à l’agriculture sécurisées dans des installations de conservation à moyen ou à long terme', 'By 2020, preserve the genetic diversity of seeds, crops and farmed or domesticated animals and related wild species, including through well-managed and diversified seed and plant banks at national, regional and promote access to, and fair and equitable sharing of, the benefits of using genetic resources and associated traditional knowledge, as agreed internationally', 'D’ici à 2020, préserver la diversité génétique des semences, des cultures et des animaux d’élevage ou domestiqués et des espèces sauvages apparentées, y compris au moyen de banques de semences et de plantes bien gérées et diversifiées aux niveaux national, régional et international, et favoriser l’accès aux avantages que présentent l’utilisation des ressources génétiques et du savoir traditionnel associé ainsi que le partage juste et équitable de ces avantages, comme convenu à l’échelle internationale', '#', null, null, 'ISRA', null, 1007);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1007, 1890, 2016, 1022, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1007, 1890, 2017, 1023, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Agricultural orientation index of public expenditure', 'Indice d’orientation agricole des dépenses publiques', 'Increase, in particular through the strengthening of international cooperation, investment in rural infrastructure, agricultural research and extension services and the development of technologies and banks of plants and genes of farm animals, in order to strengthen the agricultural productive capacities of developing countries, in particular the least developed countries', 'Accroître, notamment grâce au renforcement de la coopération internationale, l’investissement dans l’infrastructure rurale, les services de recherche et de vulgarisation agricoles et la mise au point de technologies et de banques de plantes et de gènes d’animaux d’élevage, afin de renforcer les capacités productives agricoles des pays en développement, en particulier des pays les moins avancés', '%', 0.5, 2011, 'DGB/DGPPE', null, 1008);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1008, 0.75, 2015, 1024, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1008, 0.69, 2016, 1025, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1008, 0.57, 2017, 1026, 3);

            insert into national_indicator (created_by, last_modified_by, name, name_fr, description, description_fr, measure, reference_value, reference_year, source, target_value, id) values ('admin', 'admin', 'Budget allocated to the agricultural sector', 'Budget alloué au secteur agricole', 'Increase, in particular through the strengthening of international cooperation, investment in rural infrastructure, agricultural research and extension services and the development of technologies and banks of plants and genes of farm animals, in order to strengthen the agricultural productive capacities of developing countries, in particular the least developed countries', 'Accroître, notamment grâce au renforcement de la coopération internationale, l’investissement dans l’infrastructure rurale, les services de recherche et de vulgarisation agricoles et la mise au point de technologies et de banques de plantes et de gènes d’animaux d’élevage, afin de renforcer les capacités productives agricoles des pays en développement, en particulier des pays les moins avancés', 'Billions of CFA', 140.751, 2011, 'DGB/DGPPE/Min concernés', null, 1009);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1009, 200.7, 2015, 1027, 1);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1009, 246.8, 2016, 1028, 2);
            insert into national_indicator_year_value (created_by, last_modified_by, national_indicator_id, value, year, id, index) values ('admin', 'admin', 1009, 248.9, 2017, 1029, 3);


        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicators3" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator_year_value" />
        </preConditions>
        <sql><![CDATA[
            update national_indicator_year_value set index= 0 where id in (1000, 1004, 1007, 1010, 1013, 1016, 1019, 1022, 1024, 1027);
            update national_indicator_year_value set index= 1 where id in (1001, 1005, 1008, 1011, 1014, 1017, 1020, 1023, 1025, 1028);
            update national_indicator_year_value set index= 2 where id in (1002, 1006, 1009, 1012, 1015, 1018, 1021, 1026, 1029);

        ]]></sql>
    </changeSet>

    <changeSet id="IndicatorApprovedFlag3" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <not>
                <columnExists tableName="national_indicator" columnName="approved" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE national_indicator
                ADD COLUMN "approved" BOOLEAN DEFAULT FALSE;

        ]]></sql>
    </changeSet>

    <changeSet id="IndicatorApprovedFlag4" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
            <not>
                <columnExists tableName="region_indicator" columnName="approved" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE region_indicator
                ADD COLUMN "approved" BOOLEAN DEFAULT FALSE;

        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicatorApprovedFlag" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
        </preConditions>
        <sql><![CDATA[
            update national_indicator set approved=true;

        ]]></sql>
    </changeSet>


    <changeSet id="RegionIndicatorMapFlags" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
        </preConditions>
        <sql><![CDATA[
            update region_indicator set left_map=false, right_map=false;

        ]]></sql>
    </changeSet>

    <changeSet id="PartnerGroupUpdate" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <tableExists tableName="localized_category_label" />
        </preConditions>
        <sql><![CDATA[
            UPDATE localized_category_label SET label='Instituts de recherche et universités' WHERE label = 'Instituts de recherche';
            UPDATE category SET label='Research Institutes & Universities' WHERE label = 'Research Institutes';
        ]]></sql>
    </changeSet>

    <changeSet id="DepartmentAlterUpdate" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="department" />
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE department add column "code" varchar(10);
            update department set code = 'BK' where name = 'Bakel';
            update department set code = 'BB' where name = 'Bambey';
            update department set code = 'BG' where name = 'Bignona';
            update department set code = 'BR' where name = 'Birkilane';
            update department set code = 'BL' where name = 'Bounkiling';
            update department set code = 'DG' where name = 'Dagana';
            update department set code = 'DK' where name = 'Dakar';
            update department set code = 'DB' where name = 'Diourbel';
            update department set code = 'FK' where name = 'Fatick';
            update department set code = 'FD' where name = 'Foundiougne';
            update department set code = 'GS' where name = 'Gossas';
            update department set code = 'GY' where name = 'Goudiry';
            update department set code = 'GP' where name = 'Goudomp';
            update department set code = 'GD' where name = 'Guinguinéo';
            update department set code = 'GG' where name = 'Guédiawaye';
            update department set code = 'KF' where name = 'Kaffrine';
            update department set code = 'KN' where name = 'Kanel';
            update department set code = 'KL' where name = 'Kaolack';
            update department set code = 'KB' where name = 'Kolda';
            update department set code = 'KG' where name = 'Koumpentoum';
            update department set code = 'KD' where name = 'Kounghel';
            update department set code = 'KP' where name = 'Kébémer';
            update department set code = 'KU' where name = 'Kédougou';
            update department set code = 'LN' where name = 'Linguère';
            update department set code = 'LG' where name = 'Louga';
            update department set code = 'MH' where name = 'M''bour';
            update department set code = 'MT' where name = 'Malem-Hodar';
            update department set code = 'MK' where name = 'Matam';
            update department set code = 'MR' where name = 'Mbacké';
            update department set code = 'YF' where name = 'Médina Yoro Foulah';
            update department set code = 'NR' where name = 'Nioro du Rip';
            update department set code = 'OU' where name = 'Oussouye';
            update department set code = 'PK' where name = 'Pikine';
            update department set code = 'PD' where name = 'Podor';
            update department set code = 'RN' where name = 'Ranérou';
            update department set code = 'RF' where name = 'Rufisque';
            update department set code = 'SL' where name = 'Saint-Louis';
            update department set code = 'SM' where name = 'Salemata';
            update department set code = 'SY' where name = 'Saraya';
            update department set code = 'SD' where name = 'Sédhiou';
            update department set code = 'TC' where name = 'Tambacounda';
            update department set code = 'TH' where name = 'Thiès';
            update department set code = 'TV' where name = 'Tivaouane';
            update department set code = 'VL' where name = 'Vélingara';
            update department set code = 'ZG' where name = 'Ziguinchor';
        ]]></sql>
    </changeSet>

    <changeSet id="ProdDropRegion" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="production" />
            <columnExists tableName="production" columnName="region_id" />
        </preConditions>
        <sql><![CDATA[
            alter table production drop column "region_id";
        ]]></sql>
    </changeSet>

    <changeSet id="GisIndicator" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
        </preConditions>
        <sql><![CDATA[
            INSERT INTO category (dtype, id, label, type) VALUES ('GisIndicator', nextval('hibernate_sequence'), 'Pauvreté/Poverty', 1);
            INSERT INTO category (dtype, id, label, type) VALUES ('GisIndicator', nextval('hibernate_sequence'), 'Production', 2);
            INSERT INTO category (dtype, id, label, type) VALUES ('GisIndicator', nextval('hibernate_sequence'), 'Consommation/Consumption', 3);

        ]]></sql>
    </changeSet>

    <changeSet id="AddDescendingColumn3" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
            <not>
                <columnExists tableName="region_indicator" columnName="descending" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE region_indicator
                ADD COLUMN "descending" BOOLEAN DEFAULT FALSE;
        ]]></sql>
    </changeSet>

    <changeSet id="AddDescendingColumn4" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <not>
                <columnExists tableName="national_indicator" columnName="descending" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE national_indicator
                ADD COLUMN "descending" BOOLEAN DEFAULT FALSE;
        ]]></sql>
    </changeSet>

    <changeSet id="NationalIndicatorTargetYear2" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <columnExists tableName="national_indicator" columnName="target_year" />
        </preConditions>
        <sql><![CDATA[
            update national_indicator set target_year=2030 where target_value is not null ;

        ]]></sql>
    </changeSet>

    <changeSet id="GisSettingsInit" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="gis_settings" />
            <sqlCheck expectedResult="0">
                select count(*) from gis_settings;
            </sqlCheck>
        </preConditions>
        <insert tableName="gis_settings">
            <column name="id" valueSequenceNext="hibernate_sequence" />
        </insert>
    </changeSet>

    <changeSet id="IndicatorGroupInit" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="category" />
            <sqlCheck expectedResult="0">
                select count(*) from category where dtype = 'IndicatorGroup' ;
            </sqlCheck>
        </preConditions>
        <insert tableName="category">
            <column name="id" valueSequenceNext="hibernate_sequence" />
            <column name="dtype" value="IndicatorGroup" />
            <column name="label" value="Default" />
        </insert>
    </changeSet>


    <changeSet id="AddRegionIndicatorFlag" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
            <not>
                <columnExists tableName="region_indicator" columnName="fake_indicator_flag" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE region_indicator
                ADD COLUMN "fake_indicator_flag" BOOLEAN DEFAULT FALSE;
        ]]></sql>
    </changeSet>


    <changeSet id="AddDepIndicatorFlag" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="department_indicator" />
            <not>
                <columnExists tableName="department_indicator" columnName="fake_indicator_flag" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE department_indicator
                ADD COLUMN "fake_indicator_flag" BOOLEAN DEFAULT FALSE;
        ]]></sql>
    </changeSet>


    <changeSet id="AddNationalIndicatorGroup" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="national_indicator" />
            <not>
                <columnExists tableName="national_indicator" columnName="indicator_group_id" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE national_indicator
                ADD COLUMN "indicator_group_id" int8;
        ]]></sql>
    </changeSet>


    <changeSet id="AddRegionIndicatorGroup" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="region_indicator" />
            <not>
                <columnExists tableName="region_indicator" columnName="indicator_group_id" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE region_indicator
                ADD COLUMN "indicator_group_id" int8;
        ]]></sql>
    </changeSet>


    <changeSet id="AddDepIndicatorGroup" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="department_indicator" />
            <not>
                <columnExists tableName="department_indicator" columnName="indicator_group_id" />
            </not>
        </preConditions>
        <sql><![CDATA[
            ALTER TABLE department_indicator
                ADD COLUMN "indicator_group_id" int8;
        ]]></sql>
    </changeSet>


    <changeSet id="AddDefaultIndicatorGroup" author="Daniel Oliva">
        <preConditions onFail="CONTINUE">
            <tableExists tableName="department_indicator" />
            <tableExists tableName="region_indicator" />
            <tableExists tableName="national_indicator" />
        </preConditions>
        <sql><![CDATA[
            UPDATE national_indicator set indicator_group_id = ind.id FROM category ind WHERE ind.dtype = 'IndicatorGroup' AND ind.label = 'Default';
            UPDATE region_indicator set indicator_group_id = ind.id FROM category ind WHERE ind.dtype = 'IndicatorGroup' AND ind.label = 'Default';
            UPDATE department_indicator set indicator_group_id = ind.id FROM category ind WHERE ind.dtype = 'IndicatorGroup' AND ind.label = 'Default';
        ]]></sql>
    </changeSet>

</databaseChangeLog>
